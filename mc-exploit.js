javascript:(function() {
    let url = "https://www.minecraft.net/en-us/15th-anniversary";

    const swalScript = document.createElement('script');
  swalScript.src = 'https://cdn.jsdelivr.net/npm/sweetalert2@11';
  document.head.appendChild(swalScript);

    function showLoading() {
        Swal.fire({
            title: "Please Wait",
            text: "Processing...",
            allowOutsideClick: false,
            didOpen: () => {
                Swal.showLoading();
            }
        });
    }

    function processRequest() {
        showLoading(); 

        try {
            const mcToken = JSON.parse(localStorage.getItem('MCToken')).mcToken;

            fetch("https://net.web.minecraft-services.net/api/v1.0/grant/offer?offer=7118a7d5-240e-4f6d-8959-5269ba041938", {
                "headers": {
                    "accept": "/",
                    "accept-language": "en-US,en;q=0.9",
                    "authorization": mcToken,
                    "content-type": "application/json",
                    "priority": "u=1, i",
                    "sec-ch-ua-mobile": "?0",
                    "sec-ch-ua-platform": "Windows",
                    "sec-fetch-dest": "empty",
                    "sec-fetch-mode": "cors",
                    "sec-fetch-site": "cross-site"
                },
                "referrer": "https://www.minecraft.net/",
                "referrerPolicy": "strict-origin-when-cross-origin",
                "body": null,
                "method": "PUT",
                "mode": "cors",
                "credentials": "include"
            })
            .then(response => {
                console.log("Status Code:", response.status);
                if (response.status === 204) {
                    Swal.fire("Success", "Please relogin into Minecraft.", "success");
                } else {
                    Swal.fire("Error", "Patched Or Something Went Wrong - This either no longer works or something went wrong.", "error");
                }
            });

        } catch (e) {
            showLoading();
        }
    }

    function checkLoggedIn() {
        Swal.fire({
            title: "Are you logged into Minecraft?",
            text: "Make sure you're logged into your Minecraft account before proceeding.",
            icon: "question",
            showCancelButton: true,
            confirmButtonText: "Yes, I'm logged in",
            cancelButtonText: "No, take me to login"
        }).then((result) => {
            if (result.isConfirmed) {
                processRequest(); 
            } else {
                window.open("https://www.minecraft.net/", "_blank");
                Swal.fire("Please Login", "Redirecting you to Minecraft.net", "info");
            }
        });
    }

    if (window.location.href !== url) {
        Swal.fire({
            title: "Incorrect Website",
            text: "Would you like to go to the correct website?",
            icon: "warning",
            showCancelButton: true,
            confirmButtonText: "Yes",
            cancelButtonText: "No"
        }).then((result) => {
            if (result.isConfirmed) {
                window.open(url, "_blank");
            } else {
                Swal.fire("Operation Cancelled", "", "info");
            }
        });
    } else {
        Swal.fire({
            title: "Are you sure?",
            text: "Do you want to proceed?",
            icon: "question",
            showCancelButton: true,
            confirmButtonText: "Yes",
            cancelButtonText: "No"
        }).then((result) => {
            if (result.isConfirmed) {
                checkLoggedIn();
            } else {
                Swal.fire("Operation Cancelled", "", "info");
            }
        });
    }
})();
