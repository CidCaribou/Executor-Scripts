
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>2048 / Unblcoked Games 76</title>
        <link href="https://raw.githubusercontent.com/CidCaribou/Executor-Scripts/refs/heads/main/Games%20/2048/style(main).css" rel="stylesheet" type="text/css" />
        <link href="https://raw.githubusercontent.com/CidCaribou/Executor-Scripts/refs/heads/main/Games%20/2048/ai.css" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="favicon.ico" />
        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
        <meta property="og:title" content="2048 game" />
        <meta property="og:site_name" content="2048 game" />
        <meta property="og:description" content="Join the numbers and get to the 2048 tile! Careful: this game is extremely addictive!" />
        <meta property="og:image" content="meta/og_image.png" />
		<script type="text/javascript" src="https://ubg76.github.io/cloak.js"></script>
    </head>
    <style>
    @import url(fonts/clear-sans.css);
html, body {
  margin: 0;
  padding: 0;
  background: #faf8ef;
  color: #776e65;
  font-family: "Clear Sans", "Helvetica Neue", Arial, sans-serif;
  font-size: 18px; }

body {
  margin: 80px 0; }

.heading:after {
  content: "";
  display: block;
  clear: both; }

h1.title {
  font-size: 80px;
  font-weight: bold;
  margin: 0;
  display: block;
  float: left; }

@-webkit-keyframes move-up {
  0% {
    top: 25px;
    opacity: 1; }

  100% {
    top: -50px;
    opacity: 0; } }

@-moz-keyframes move-up {
  0% {
    top: 25px;
    opacity: 1; }

  100% {
    top: -50px;
    opacity: 0; } }

@keyframes move-up {
  0% {
    top: 25px;
    opacity: 1; }

  100% {
    top: -50px;
    opacity: 0; } }

.score-container {
  position: relative;
  float: right;
  background: #bbada0;
  padding: 15px 25px;
  font-size: 25px;
  height: 25px;
  line-height: 47px;
  font-weight: bold;
  border-radius: 3px;
  color: white;
  margin-top: 8px; }
  .score-container:after {
    position: absolute;
    width: 100%;
    top: 10px;
    left: 0;
    content: "Score";
    text-transform: uppercase;
    font-size: 13px;
    line-height: 13px;
    text-align: center;
    color: #eee4da; }
  .score-container .score-addition {
    position: absolute;
    right: 30px;
    color: red;
    font-size: 25px;
    line-height: 25px;
    font-weight: bold;
    color: rgba(119, 110, 101, 0.9);
    z-index: 100;
    -webkit-animation: move-up 600ms ease-in;
    -moz-animation: move-up 600ms ease-in;
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both; }

p {
  margin-top: 0;
  margin-bottom: 10px;
  line-height: 1.65; }

a {
  color: #776e65;
  font-weight: bold;
  text-decoration: underline;
  cursor: pointer; }

strong.important {
  text-transform: uppercase; }

hr {
  border: none;
  border-bottom: 1px solid #d8d4d0;
  margin-top: 20px;
  margin-bottom: 30px; }

.container {
  width: 500px;
  margin: 0 auto; }

@-webkit-keyframes fade-in {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }

@-moz-keyframes fade-in {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }

@keyframes fade-in {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }

.game-container {
  margin-top: 40px;
  position: relative;
  padding: 15px;
  cursor: default;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  background: #bbada0;
  border-radius: 6px;
  width: 500px;
  height: 500px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; }
  .game-container .game-message {
    display: none;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: rgba(238, 228, 218, 0.5);
    z-index: 100;
    text-align: center;
    -webkit-animation: fade-in 800ms ease 1200ms;
    -moz-animation: fade-in 800ms ease 1200ms;
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both; }
    .game-container .game-message p {
      font-size: 60px;
      font-weight: bold;
      height: 60px;
      line-height: 60px;
      margin-top: 222px; }
    .game-container .game-message .lower {
      display: block;
      margin-top: 59px; }
    .game-container .game-message a {
      display: inline-block;
      background: #8f7a66;
      border-radius: 3px;
      padding: 0 20px;
      text-decoration: none;
      color: #f9f6f2;
      height: 40px;
      line-height: 42px;
      margin-left: 9px; }
    .game-container .game-message .score-sharing {
      display: inline-block;
      vertical-align: middle;
      margin-left: 10px; }
    .game-container .game-message.game-won {
      background: rgba(237, 194, 46, 0.5);
      color: #f9f6f2; }
    .game-container .game-message.game-won, .game-container .game-message.game-over {
      display: block; }

.grid-container {
  position: absolute;
  z-index: 1; }

.grid-row {
  margin-bottom: 15px; }
  .grid-row:last-child {
    margin-bottom: 0; }
  .grid-row:after {
    content: "";
    display: block;
    clear: both; }

.grid-cell {
  width: 106.25px;
  height: 106.25px;
  margin-right: 15px;
  float: left;
  border-radius: 3px;
  background: rgba(238, 228, 218, 0.35); }
  .grid-cell:last-child {
    margin-right: 0; }

.tile-container {
  position: absolute;
  z-index: 2; }

.tile {
  width: 106.25px;
  height: 106.25px;
  line-height: 116.25px; }
  .tile.tile-position-1-1 {
    position: absolute;
    left: 0px;
    top: 0px; }
  .tile.tile-position-1-2 {
    position: absolute;
    left: 0px;
    top: 121px; }
  .tile.tile-position-1-3 {
    position: absolute;
    left: 0px;
    top: 243px; }
  .tile.tile-position-1-4 {
    position: absolute;
    left: 0px;
    top: 364px; }
  .tile.tile-position-2-1 {
    position: absolute;
    left: 121px;
    top: 0px; }
  .tile.tile-position-2-2 {
    position: absolute;
    left: 121px;
    top: 121px; }
  .tile.tile-position-2-3 {
    position: absolute;
    left: 121px;
    top: 243px; }
  .tile.tile-position-2-4 {
    position: absolute;
    left: 121px;
    top: 364px; }
  .tile.tile-position-3-1 {
    position: absolute;
    left: 243px;
    top: 0px; }
  .tile.tile-position-3-2 {
    position: absolute;
    left: 243px;
    top: 121px; }
  .tile.tile-position-3-3 {
    position: absolute;
    left: 243px;
    top: 243px; }
  .tile.tile-position-3-4 {
    position: absolute;
    left: 243px;
    top: 364px; }
  .tile.tile-position-4-1 {
    position: absolute;
    left: 364px;
    top: 0px; }
  .tile.tile-position-4-2 {
    position: absolute;
    left: 364px;
    top: 121px; }
  .tile.tile-position-4-3 {
    position: absolute;
    left: 364px;
    top: 243px; }
  .tile.tile-position-4-4 {
    position: absolute;
    left: 364px;
    top: 364px; }

.tile {
  border-radius: 3px;
  background: #eee4da;
  text-align: center;
  font-weight: bold;
  z-index: 10;
  font-size: 55px;
  -webkit-transition: 100ms ease-in-out;
  -moz-transition: 100ms ease-in-out;
  -webkit-transition-property: top, left;
  -moz-transition-property: top, left; }
  .tile.tile-2 {
    background: #eee4da;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0), inset 0 0 0 1px rgba(255, 255, 255, 0); }
  .tile.tile-4 {
    background: #ede0c8;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0), inset 0 0 0 1px rgba(255, 255, 255, 0); }
  .tile.tile-8 {
    color: #f9f6f2;
    background: #f2b179; }
  .tile.tile-16 {
    color: #f9f6f2;
    background: #f59563; }
  .tile.tile-32 {
    color: #f9f6f2;
    background: #f67c5f; }
  .tile.tile-64 {
    color: #f9f6f2;
    background: #f65e3b; }
  .tile.tile-128 {
    color: #f9f6f2;
    background: #edcf72;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.2381), inset 0 0 0 1px rgba(255, 255, 255, 0.14286);
    font-size: 45px; }
    @media screen and (max-width: 480px) {
      .tile.tile-128 {
        font-size: 25px; } }
  .tile.tile-256 {
    color: #f9f6f2;
    background: #edcc61;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.31746), inset 0 0 0 1px rgba(255, 255, 255, 0.19048);
    font-size: 45px; }
    @media screen and (max-width: 480px) {
      .tile.tile-256 {
        font-size: 25px; } }
  .tile.tile-512 {
    color: #f9f6f2;
    background: #edc850;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.39683), inset 0 0 0 1px rgba(255, 255, 255, 0.2381);
    font-size: 45px; }
    @media screen and (max-width: 480px) {
      .tile.tile-512 {
        font-size: 25px; } }
  .tile.tile-1024 {
    color: #f9f6f2;
    background: #edc53f;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.47619), inset 0 0 0 1px rgba(255, 255, 255, 0.28571);
    font-size: 35px; }
    @media screen and (max-width: 480px) {
      .tile.tile-1024 {
        font-size: 15px; } }
  .tile.tile-2048 {
    color: #f9f6f2;
    background: #edc22e;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.55556), inset 0 0 0 1px rgba(255, 255, 255, 0.33333);
    font-size: 35px; }
    @media screen and (max-width: 480px) {
      .tile.tile-2048 {
        font-size: 15px; } }

@-webkit-keyframes appear {
  0% {
    opacity: 0;
    -webkit-transform: scale(0);
    -moz-transform: scale(0); }

  100% {
    opacity: 1;
    -webkit-transform: scale(1);
    -moz-transform: scale(1); } }

@-moz-keyframes appear {
  0% {
    opacity: 0;
    -webkit-transform: scale(0);
    -moz-transform: scale(0); }

  100% {
    opacity: 1;
    -webkit-transform: scale(1);
    -moz-transform: scale(1); } }

@keyframes appear {
  0% {
    opacity: 0;
    -webkit-transform: scale(0);
    -moz-transform: scale(0); }

  100% {
    opacity: 1;
    -webkit-transform: scale(1);
    -moz-transform: scale(1); } }

.tile-new {
  -webkit-animation: appear 200ms ease 100ms;
  -moz-animation: appear 200ms ease 100ms;
  -webkit-animation-fill-mode: both;
  -moz-animation-fill-mode: both; }

@-webkit-keyframes pop {
  0% {
    -webkit-transform: scale(0);
    -moz-transform: scale(0); }

  50% {
    -webkit-transform: scale(1.2);
    -moz-transform: scale(1.2); }

  100% {
    -webkit-transform: scale(1);
    -moz-transform: scale(1); } }

@-moz-keyframes pop {
  0% {
    -webkit-transform: scale(0);
    -moz-transform: scale(0); }

  50% {
    -webkit-transform: scale(1.2);
    -moz-transform: scale(1.2); }

  100% {
    -webkit-transform: scale(1);
    -moz-transform: scale(1); } }

@keyframes pop {
  0% {
    -webkit-transform: scale(0);
    -moz-transform: scale(0); }

  50% {
    -webkit-transform: scale(1.2);
    -moz-transform: scale(1.2); }

  100% {
    -webkit-transform: scale(1);
    -moz-transform: scale(1); } }

.tile-merged {
  z-index: 20;
  -webkit-animation: pop 200ms ease 100ms;
  -moz-animation: pop 200ms ease 100ms;
  -webkit-animation-fill-mode: both;
  -moz-animation-fill-mode: both; }

.game-intro {
  margin-bottom: 0; }

.game-explanation {
  margin-top: 50px; }

.sharing {
  margin-top: 20px;
  text-align: center; }
  .sharing > iframe, .sharing span {
    display: inline-block;
    vertical-align: middle; }

@media screen and (max-width: 480px) {
  html, body {
    font-size: 15px; }

  body {
    margin: 20px 0;
    padding: 0 20px; }

  h1.title {
    font-size: 50px; }

  .container {
    width: 280px;
    margin: 0 auto; }

  .score-container {
    margin-top: 0; }

  .heading {
    margin-bottom: 10px; }

  .game-container {
    margin-top: 40px;
    position: relative;
    padding: 10px;
    cursor: default;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    background: #bbada0;
    border-radius: 6px;
    width: 280px;
    height: 280px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; }
    .game-container .game-message {
      display: none;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: rgba(238, 228, 218, 0.5);
      z-index: 100;
      text-align: center;
      -webkit-animation: fade-in 800ms ease 1200ms;
      -moz-animation: fade-in 800ms ease 1200ms;
      -webkit-animation-fill-mode: both;
      -moz-animation-fill-mode: both; }
      .game-container .game-message p {
        font-size: 60px;
        font-weight: bold;
        height: 60px;
        line-height: 60px;
        margin-top: 222px; }
      .game-container .game-message .lower {
        display: block;
        margin-top: 59px; }
      .game-container .game-message a {
        display: inline-block;
        background: #8f7a66;
        border-radius: 3px;
        padding: 0 20px;
        text-decoration: none;
        color: #f9f6f2;
        height: 40px;
        line-height: 42px;
        margin-left: 9px; }
      .game-container .game-message .score-sharing {
        display: inline-block;
        vertical-align: middle;
        margin-left: 10px; }
      .game-container .game-message.game-won {
        background: rgba(237, 194, 46, 0.5);
        color: #f9f6f2; }
      .game-container .game-message.game-won, .game-container .game-message.game-over {
        display: block; }

  .grid-container {
    position: absolute;
    z-index: 1; }

  .grid-row {
    margin-bottom: 10px; }
    .grid-row:last-child {
      margin-bottom: 0; }
    .grid-row:after {
      content: "";
      display: block;
      clear: both; }

  .grid-cell {
    width: 57.5px;
    height: 57.5px;
    margin-right: 10px;
    float: left;
    border-radius: 3px;
    background: rgba(238, 228, 218, 0.35); }
    .grid-cell:last-child {
      margin-right: 0; }

  .tile-container {
    position: absolute;
    z-index: 2; }

  .tile {
    width: 57.5px;
    height: 57.5px;
    line-height: 67.5px; }
    .tile.tile-position-1-1 {
      position: absolute;
      left: 0px;
      top: 0px; }
    .tile.tile-position-1-2 {
      position: absolute;
      left: 0px;
      top: 68px; }
    .tile.tile-position-1-3 {
      position: absolute;
      left: 0px;
      top: 135px; }
    .tile.tile-position-1-4 {
      position: absolute;
      left: 0px;
      top: 203px; }
    .tile.tile-position-2-1 {
      position: absolute;
      left: 68px;
      top: 0px; }
    .tile.tile-position-2-2 {
      position: absolute;
      left: 68px;
      top: 68px; }
    .tile.tile-position-2-3 {
      position: absolute;
      left: 68px;
      top: 135px; }
    .tile.tile-position-2-4 {
      position: absolute;
      left: 68px;
      top: 203px; }
    .tile.tile-position-3-1 {
      position: absolute;
      left: 135px;
      top: 0px; }
    .tile.tile-position-3-2 {
      position: absolute;
      left: 135px;
      top: 68px; }
    .tile.tile-position-3-3 {
      position: absolute;
      left: 135px;
      top: 135px; }
    .tile.tile-position-3-4 {
      position: absolute;
      left: 135px;
      top: 203px; }
    .tile.tile-position-4-1 {
      position: absolute;
      left: 203px;
      top: 0px; }
    .tile.tile-position-4-2 {
      position: absolute;
      left: 203px;
      top: 68px; }
    .tile.tile-position-4-3 {
      position: absolute;
      left: 203px;
      top: 135px; }
    .tile.tile-position-4-4 {
      position: absolute;
      left: 203px;
      top: 203px; }

  .game-container {
    margin-top: 20px; }

  .tile {
    font-size: 35px; }

  .game-message p {
    font-size: 30px !important;
    height: 30px !important;
    line-height: 30px !important;
    margin-top: 90px !important; }
  .game-message .lower {
    margin-top: 30px !important; } }
.btc-donate {
  position: relative;
  margin-left: 20px;
  display: inline-block;
  background: #8f7a66;
  border-radius: 3px;
  padding: 0 20px;
  text-decoration: none;
  color: #f9f6f2;
  height: 40px;
  line-height: 42px;
  cursor: pointer; }
  .btc-donate img {
    vertical-align: -4px;
    margin-right: 8px; }
  .btc-donate a {
    color: #f9f6f2;
    text-decoration: none;
    font-weight: normal; }
  .btc-donate .address {
    cursor: auto;
    position: absolute;
    width: 340px;
    right: 50%;
    margin-right: -170px;
    padding-bottom: 7px;
    top: -30px;
    opacity: 0;
    pointer-events: none;
    -webkit-transition: 400ms ease;
    -moz-transition: 400ms ease;
    -webkit-transition-property: top, opacity;
    -moz-transition-property: top, opacity; }
    .btc-donate .address:after {
      position: absolute;
      border-top: 10px solid #bbada0;
      border-right: 7px solid transparent;
      border-left: 7px solid transparent;
      content: "";
      bottom: 0px;
      left: 50%;
      margin-left: -7px; }
    .btc-donate .address code {
      background-color: #bbada0;
      padding: 10px 15px;
      width: 100%;
      border-radius: 3px;
      line-height: 1;
      font-weight: normal;
      font-size: 15px;
      font-family: Consolas, "Liberation Mono", Courier, monospace;
      text-align: center; }
  .btc-donate:hover .address, .btc-donate .address:hover .address {
    opacity: 1;
    top: -45px;
    pointer-events: auto; }
    .controls {
    margin-top: 1em;
    padding: 0.5em 0;
    overflow: auto;
  }
  
  .controls button {
    /*display: inline-block;*/
    background: #8f7a66;
    border: 0;
    border-radius: 3px;
    padding: 0 20px;
    color: #f9f6f2;
    height: 40px;
    line-height: 42px;
    font-family: "Clear Sans", "Helvetica Neue", Arial, sans-serif;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
  }
  
  .controls button:hover {
      background: #ad957f;
  } 
  
  .ai-button, #feedback-container {
    line-height: 40px;
    font-size: 36px;
  }
  
  #run-button-container {
    float: right;
  }
  
  #hint-button-container, #feedback-container {
    float: left;
  }
  
  #feedback-container {
    background: #8f7a66;
    color: #f9f6f2;
    margin-left: 1em;
    font-weight: bold;
  }  
  </style>
    <body>
        <div class="container"> 
            <div class="heading">
                <h1 class="title">2048</h1>
                <div class="score-container">0</div>
            </div>
            <p class="game-intro">Join the numbers and get to the <strong>2048 tile!</strong></p>
            <div class="controls">
                <div id="hint-button-container">
                    <button id="hint-button" class="ai-button">Get Hint</button>
                </div>
                <div id="feedback-container"></div>
                <div id="run-button-container">
                    <button id="run-button" class="ai-button">Auto-run</button>
                </div>
            </div>
            <div class="game-container">
                <div class="game-message">
                    <p></p>
                    <div class="lower">
                        <a class="retry-button">Try again</a>
                        <div class="score-sharing"></div>
                    </div>
                </div>
                <div class="grid-container">
                    <div class="grid-row">
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                    </div>
                    <div class="grid-row">
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                    </div>
                    <div class="grid-row">
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                    </div>
                    <div class="grid-row">
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                        <div class="grid-cell"></div>
                    </div>
                </div>
                <div class="tile-container"></div>
            </div>
            <p class="game-explanation"><strong class="important">How to play:</strong> Use your <strong>arrow keys</strong> to move the tiles. When two tiles with the same number touch, they <strong>merge into one!</strong></p>
        </div>

        <script function AI(e) {
    this.grid = e
}
AI.prototype.eval = function() {
    var e = this.grid.availableCells().length;
    return .1 * this.grid.smoothness() + 1 * this.grid.monotonicity2() + 2.7 * Math.log(e) + 1 * this.grid.maxValue()
}
,
AI.prototype.search = function(e, i, r, t, o) {
    var s, n, a = -1;
    if (this.grid.playerTurn) {
        for (var l in s = i,
        [0, 1, 2, 3])
            if ((I = this.grid.clone()).move(l).moved) {
                if (t++,
                I.isWin())
                    return {
                        move: l,
                        score: 1e4,
                        positions: t,
                        cutoffs: o
                    };
                var h = new AI(I);
                if (0 == e ? n = {
                    move: l,
                    score: h.eval()
                } : ((n = h.search(e - 1, s, r, t, o)).score > 9900 && n.score--,
                t = n.positions,
                o = n.cutoffs),
                n.score > s && (s = n.score,
                a = l),
                s > r)
                    return {
                        move: a,
                        score: r,
                        positions: t,
                        cutoffs: ++o
                    }
            }
    } else {
        s = r;
        var u = []
          , c = this.grid.availableCells()
          , f = {
            2: [],
            4: []
        };
        for (var p in f)
            for (var v in c) {
                f[p].push(null);
                var g = c[v]
                  , m = new Tile(g,parseInt(p, 10));
                this.grid.insertTile(m),
                f[p][v] = -this.grid.smoothness() + this.grid.islands(),
                this.grid.removeTile(g)
            }
        var d = Math.max(Math.max.apply(null, f[2]), Math.max.apply(null, f[4]));
        for (var p in f)
            for (v = 0; v < f[p].length; v++)
                f[p][v] == d && u.push({
                    position: c[v],
                    value: parseInt(p, 10)
                });
        for (v = 0; v < u.length; v++) {
            var y = u[v].position
              , I = (p = u[v].value,
            this.grid.clone());
            if (m = new Tile(y,p),
            I.insertTile(m),
            I.playerTurn = !0,
            t++,
            t = (n = (h = new AI(I)).search(e, i, s, t, o)).positions,
            o = n.cutoffs,
            n.score < s && (s = n.score),
            s < i)
                return {
                    move: null,
                    score: i,
                    positions: t,
                    cutoffs: ++o
                }
        }
    }
    return {
        move: a,
        score: s,
        positions: t,
        cutoffs: o
    }
}
,
AI.prototype.getBest = function() {
    return this.iterativeDeep()
}
,
AI.prototype.iterativeDeep = function() {
    var e, i = (new Date).getTime(), r = 0;
    do {
        var t = this.search(r, -1e4, 1e4, 0, 0);
        if (-1 == t.move)
            break;
        e = t,
        r++
    } while ((new Date).getTime() - i < minSearchTime);
    return e
}
,
AI.prototype.translate = function(e) {
    return {
        0: "up",
        1: "right",
        2: "down",
        3: "left"
    }[e]
}
;</script>
        <script>/*! Hammer.JS - v1.0.6 - 2014-01-02
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
!function(t, e) {
    "use strict";
    var n = function(t, e) {
        return new n.Instance(t,e || {})
    };
    n.defaults = {
        stop_browser_behavior: {
            userSelect: "none",
            touchAction: "none",
            touchCallout: "none",
            contentZooming: "none",
            userDrag: "none",
            tapHighlightColor: "rgba(0,0,0,0)"
        }
    },
    n.HAS_POINTEREVENTS = t.navigator.pointerEnabled || t.navigator.msPointerEnabled,
    n.HAS_TOUCHEVENTS = "ontouchstart"in t,
    n.MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android|silk/i,
    n.NO_MOUSEEVENTS = n.HAS_TOUCHEVENTS && t.navigator.userAgent.match(n.MOBILE_REGEX),
    n.EVENT_TYPES = {},
    n.DIRECTION_DOWN = "down",
    n.DIRECTION_LEFT = "left",
    n.DIRECTION_UP = "up",
    n.DIRECTION_RIGHT = "right",
    n.POINTER_MOUSE = "mouse",
    n.POINTER_TOUCH = "touch",
    n.POINTER_PEN = "pen",
    n.EVENT_START = "start",
    n.EVENT_MOVE = "move",
    n.EVENT_END = "end",
    n.DOCUMENT = t.document,
    n.plugins = n.plugins || {},
    n.gestures = n.gestures || {},
    n.READY = !1,
    n.utils = {
        extend: function(t, n, i) {
            for (var r in n)
                t[r] !== e && i || (t[r] = n[r]);
            return t
        },
        each: function(t, n, i) {
            var r, o;
            if ("forEach"in t)
                t.forEach(n, i);
            else if (t.length !== e) {
                for (r = 0,
                o = t.length; o > r; r++)
                    if (!1 === n.call(i, t[r], r, t))
                        return
            } else
                for (r in t)
                    if (t.hasOwnProperty(r) && !1 === n.call(i, t[r], r, t))
                        return
        },
        hasParent: function(t, e) {
            for (; t; ) {
                if (t == e)
                    return !0;
                t = t.parentNode
            }
            return !1
        },
        getCenter: function(t) {
            var e = []
              , i = [];
            return n.utils.each(t, (function(t) {
                e.push(void 0 !== t.clientX ? t.clientX : t.pageX),
                i.push(void 0 !== t.clientY ? t.clientY : t.pageY)
            }
            )),
            {
                pageX: (Math.min.apply(Math, e) + Math.max.apply(Math, e)) / 2,
                pageY: (Math.min.apply(Math, i) + Math.max.apply(Math, i)) / 2
            }
        },
        getVelocity: function(t, e, n) {
            return {
                x: Math.abs(e / t) || 0,
                y: Math.abs(n / t) || 0
            }
        },
        getAngle: function(t, e) {
            var n = e.pageY - t.pageY
              , i = e.pageX - t.pageX;
            return 180 * Math.atan2(n, i) / Math.PI
        },
        getDirection: function(t, e) {
            return Math.abs(t.pageX - e.pageX) >= Math.abs(t.pageY - e.pageY) ? t.pageX - e.pageX > 0 ? n.DIRECTION_LEFT : n.DIRECTION_RIGHT : t.pageY - e.pageY > 0 ? n.DIRECTION_UP : n.DIRECTION_DOWN
        },
        getDistance: function(t, e) {
            var n = e.pageX - t.pageX
              , i = e.pageY - t.pageY;
            return Math.sqrt(n * n + i * i)
        },
        getScale: function(t, e) {
            return t.length >= 2 && e.length >= 2 ? this.getDistance(e[0], e[1]) / this.getDistance(t[0], t[1]) : 1
        },
        getRotation: function(t, e) {
            return t.length >= 2 && e.length >= 2 ? this.getAngle(e[1], e[0]) - this.getAngle(t[1], t[0]) : 0
        },
        isVertical: function(t) {
            return t == n.DIRECTION_UP || t == n.DIRECTION_DOWN
        },
        stopDefaultBrowserBehavior: function(t, e) {
            e && t && t.style && (n.utils.each(["webkit", "khtml", "moz", "Moz", "ms", "o", ""], (function(i) {
                n.utils.each(e, (function(e) {
                    i && (e = i + e.substring(0, 1).toUpperCase() + e.substring(1)),
                    e in t.style && (t.style[e] = e)
                }
                ))
            }
            )),
            "none" == e.userSelect && (t.onselectstart = function() {
                return !1
            }
            ),
            "none" == e.userDrag && (t.ondragstart = function() {
                return !1
            }
            ))
        }
    },
    n.Instance = function(t, e) {
        var i = this;
        return n.READY || (n.event.determineEventTypes(),
        n.utils.each(n.gestures, (function(t) {
            n.detection.register(t)
        }
        )),
        n.event.onTouch(n.DOCUMENT, n.EVENT_MOVE, n.detection.detect),
        n.event.onTouch(n.DOCUMENT, n.EVENT_END, n.detection.detect),
        n.READY = !0),
        this.element = t,
        this.enabled = !0,
        this.options = n.utils.extend(n.utils.extend({}, n.defaults), e || {}),
        this.options.stop_browser_behavior && n.utils.stopDefaultBrowserBehavior(this.element, this.options.stop_browser_behavior),
        n.event.onTouch(t, n.EVENT_START, (function(t) {
            i.enabled && n.detection.startDetect(i, t)
        }
        )),
        this
    }
    ,
    n.Instance.prototype = {
        on: function(t, e) {
            var i = t.split(" ");
            return n.utils.each(i, (function(t) {
                this.element.addEventListener(t, e, !1)
            }
            ), this),
            this
        },
        off: function(t, e) {
            var i = t.split(" ");
            return n.utils.each(i, (function(t) {
                this.element.removeEventListener(t, e, !1)
            }
            ), this),
            this
        },
        trigger: function(t, e) {
            e || (e = {});
            var i = n.DOCUMENT.createEvent("Event");
            i.initEvent(t, !0, !0),
            i.gesture = e;
            var r = this.element;
            return n.utils.hasParent(e.target, r) && (r = e.target),
            r.dispatchEvent(i),
            this
        },
        enable: function(t) {
            return this.enabled = t,
            this
        }
    };
    var i = null
      , r = !1
      , o = !1;
    n.event = {
        bindDom: function(t, e, i) {
            var r = e.split(" ");
            n.utils.each(r, (function(e) {
                t.addEventListener(e, i, !1)
            }
            ))
        },
        onTouch: function(t, e, s) {
            var a = this;
            this.bindDom(t, n.EVENT_TYPES[e], (function(c) {
                var u = c.type.toLowerCase();
                if (!u.match(/mouse/) || !o) {
                    u.match(/touch/) || u.match(/pointerdown/) || u.match(/mouse/) && 1 === c.which ? r = !0 : u.match(/mouse/) && !c.which && (r = !1),
                    u.match(/touch|pointer/) && (o = !0);
                    var h = 0;
                    r && (n.HAS_POINTEREVENTS && e != n.EVENT_END ? h = n.PointerEvent.updatePointer(e, c) : u.match(/touch/) ? h = c.touches.length : o || (h = u.match(/up/) ? 0 : 1),
                    h > 0 && e == n.EVENT_END ? e = n.EVENT_MOVE : h || (e = n.EVENT_END),
                    (h || null === i) && (i = c),
                    s.call(n.detection, a.collectEventData(t, e, a.getTouchList(i, e), c)),
                    n.HAS_POINTEREVENTS && e == n.EVENT_END && (h = n.PointerEvent.updatePointer(e, c))),
                    h || (i = null,
                    r = !1,
                    o = !1,
                    n.PointerEvent.reset())
                }
            }
            ))
        },
        determineEventTypes: function() {
            var t;
            t = n.HAS_POINTEREVENTS ? n.PointerEvent.getEvents() : n.NO_MOUSEEVENTS ? ["touchstart", "touchmove", "touchend touchcancel"] : ["touchstart mousedown", "touchmove mousemove", "touchend touchcancel mouseup"],
            n.EVENT_TYPES[n.EVENT_START] = t[0],
            n.EVENT_TYPES[n.EVENT_MOVE] = t[1],
            n.EVENT_TYPES[n.EVENT_END] = t[2]
        },
        getTouchList: function(t) {
            return n.HAS_POINTEREVENTS ? n.PointerEvent.getTouchList() : t.touches ? t.touches : (t.identifier = 1,
            [t])
        },
        collectEventData: function(t, e, i, r) {
            var o = n.POINTER_TOUCH;
            return (r.type.match(/mouse/) || n.PointerEvent.matchType(n.POINTER_MOUSE, r)) && (o = n.POINTER_MOUSE),
            {
                center: n.utils.getCenter(i),
                timeStamp: (new Date).getTime(),
                target: r.target,
                touches: i,
                eventType: e,
                pointerType: o,
                srcEvent: r,
                preventDefault: function() {
                    this.srcEvent.preventManipulation && this.srcEvent.preventManipulation(),
                    this.srcEvent.preventDefault && this.srcEvent.preventDefault()
                },
                stopPropagation: function() {
                    this.srcEvent.stopPropagation()
                },
                stopDetect: function() {
                    return n.detection.stopDetect()
                }
            }
        }
    },
    n.PointerEvent = {
        pointers: {},
        getTouchList: function() {
            var t = [];
            return n.utils.each(this.pointers, (function(e) {
                t.push(e)
            }
            )),
            t
        },
        updatePointer: function(t, e) {
            return t == n.EVENT_END ? this.pointers = {} : (e.identifier = e.pointerId,
            this.pointers[e.pointerId] = e),
            Object.keys(this.pointers).length
        },
        matchType: function(t, e) {
            if (!e.pointerType)
                return !1;
            var i = e.pointerType
              , r = {};
            return r[n.POINTER_MOUSE] = i === e.MSPOINTER_TYPE_MOUSE || i === n.POINTER_MOUSE,
            r[n.POINTER_TOUCH] = i === e.MSPOINTER_TYPE_TOUCH || i === n.POINTER_TOUCH,
            r[n.POINTER_PEN] = i === e.MSPOINTER_TYPE_PEN || i === n.POINTER_PEN,
            r[t]
        },
        getEvents: function() {
            return ["pointerdown MSPointerDown", "pointermove MSPointerMove", "pointerup pointercancel MSPointerUp MSPointerCancel"]
        },
        reset: function() {
            this.pointers = {}
        }
    },
    n.detection = {
        gestures: [],
        current: null,
        previous: null,
        stopped: !1,
        startDetect: function(t, e) {
            this.current || (this.stopped = !1,
            this.current = {
                inst: t,
                startEvent: n.utils.extend({}, e),
                lastEvent: !1,
                name: ""
            },
            this.detect(e))
        },
        detect: function(t) {
            if (this.current && !this.stopped) {
                t = this.extendEventData(t);
                var e = this.current.inst.options;
                return n.utils.each(this.gestures, (function(n) {
                    return this.stopped || !1 === e[n.name] || !1 !== n.handler.call(n, t, this.current.inst) ? void 0 : (this.stopDetect(),
                    !1)
                }
                ), this),
                this.current && (this.current.lastEvent = t),
                t.eventType == n.EVENT_END && !t.touches.length - 1 && this.stopDetect(),
                t
            }
        },
        stopDetect: function() {
            this.previous = n.utils.extend({}, this.current),
            this.current = null,
            this.stopped = !0
        },
        extendEventData: function(t) {
            var e = this.current.startEvent;
            !e || t.touches.length == e.touches.length && t.touches !== e.touches || (e.touches = [],
            n.utils.each(t.touches, (function(t) {
                e.touches.push(n.utils.extend({}, t))
            }
            )));
            var i, r, o = t.timeStamp - e.timeStamp, s = t.center.pageX - e.center.pageX, a = t.center.pageY - e.center.pageY, c = n.utils.getVelocity(o, s, a);
            return "end" === t.eventType ? (i = this.current.lastEvent && this.current.lastEvent.interimAngle,
            r = this.current.lastEvent && this.current.lastEvent.interimDirection) : (i = this.current.lastEvent && n.utils.getAngle(this.current.lastEvent.center, t.center),
            r = this.current.lastEvent && n.utils.getDirection(this.current.lastEvent.center, t.center)),
            n.utils.extend(t, {
                deltaTime: o,
                deltaX: s,
                deltaY: a,
                velocityX: c.x,
                velocityY: c.y,
                distance: n.utils.getDistance(e.center, t.center),
                angle: n.utils.getAngle(e.center, t.center),
                interimAngle: i,
                direction: n.utils.getDirection(e.center, t.center),
                interimDirection: r,
                scale: n.utils.getScale(e.touches, t.touches),
                rotation: n.utils.getRotation(e.touches, t.touches),
                startEvent: e
            }),
            t
        },
        register: function(t) {
            var i = t.defaults || {};
            return i[t.name] === e && (i[t.name] = !0),
            n.utils.extend(n.defaults, i, !0),
            t.index = t.index || 1e3,
            this.gestures.push(t),
            this.gestures.sort((function(t, e) {
                return t.index < e.index ? -1 : t.index > e.index ? 1 : 0
            }
            )),
            this.gestures
        }
    },
    n.gestures.Drag = {
        name: "drag",
        index: 50,
        defaults: {
            drag_min_distance: 10,
            correct_for_drag_min_distance: !0,
            drag_max_touches: 1,
            drag_block_horizontal: !1,
            drag_block_vertical: !1,
            drag_lock_to_axis: !1,
            drag_lock_min_distance: 25
        },
        triggered: !1,
        handler: function(t, e) {
            if (n.detection.current.name != this.name && this.triggered)
                return e.trigger(this.name + "end", t),
                void (this.triggered = !1);
            if (!(e.options.drag_max_touches > 0 && t.touches.length > e.options.drag_max_touches))
                switch (t.eventType) {
                case n.EVENT_START:
                    this.triggered = !1;
                    break;
                case n.EVENT_MOVE:
                    if (t.distance < e.options.drag_min_distance && n.detection.current.name != this.name)
                        return;
                    if (n.detection.current.name != this.name && (n.detection.current.name = this.name,
                    e.options.correct_for_drag_min_distance && t.distance > 0)) {
                        var i = Math.abs(e.options.drag_min_distance / t.distance);
                        n.detection.current.startEvent.center.pageX += t.deltaX * i,
                        n.detection.current.startEvent.center.pageY += t.deltaY * i,
                        t = n.detection.extendEventData(t)
                    }
                    (n.detection.current.lastEvent.drag_locked_to_axis || e.options.drag_lock_to_axis && e.options.drag_lock_min_distance <= t.distance) && (t.drag_locked_to_axis = !0);
                    var r = n.detection.current.lastEvent.direction;
                    t.drag_locked_to_axis && r !== t.direction && (t.direction = n.utils.isVertical(r) ? t.deltaY < 0 ? n.DIRECTION_UP : n.DIRECTION_DOWN : t.deltaX < 0 ? n.DIRECTION_LEFT : n.DIRECTION_RIGHT),
                    this.triggered || (e.trigger(this.name + "start", t),
                    this.triggered = !0),
                    e.trigger(this.name, t),
                    e.trigger(this.name + t.direction, t),
                    (e.options.drag_block_vertical && n.utils.isVertical(t.direction) || e.options.drag_block_horizontal && !n.utils.isVertical(t.direction)) && t.preventDefault();
                    break;
                case n.EVENT_END:
                    this.triggered && e.trigger(this.name + "end", t),
                    this.triggered = !1
                }
        }
    },
    n.gestures.Hold = {
        name: "hold",
        index: 10,
        defaults: {
            hold_timeout: 500,
            hold_threshold: 1
        },
        timer: null,
        handler: function(t, e) {
            switch (t.eventType) {
            case n.EVENT_START:
                clearTimeout(this.timer),
                n.detection.current.name = this.name,
                this.timer = setTimeout((function() {
                    "hold" == n.detection.current.name && e.trigger("hold", t)
                }
                ), e.options.hold_timeout);
                break;
            case n.EVENT_MOVE:
                t.distance > e.options.hold_threshold && clearTimeout(this.timer);
                break;
            case n.EVENT_END:
                clearTimeout(this.timer)
            }
        }
    },
    n.gestures.Release = {
        name: "release",
        index: 1 / 0,
        handler: function(t, e) {
            t.eventType == n.EVENT_END && e.trigger(this.name, t)
        }
    },
    n.gestures.Swipe = {
        name: "swipe",
        index: 40,
        defaults: {
            swipe_min_touches: 1,
            swipe_max_touches: 1,
            swipe_velocity: .7
        },
        handler: function(t, e) {
            if (t.eventType == n.EVENT_END) {
                if (e.options.swipe_max_touches > 0 && t.touches.length < e.options.swipe_min_touches && t.touches.length > e.options.swipe_max_touches)
                    return;
                (t.velocityX > e.options.swipe_velocity || t.velocityY > e.options.swipe_velocity) && (e.trigger(this.name, t),
                e.trigger(this.name + t.direction, t))
            }
        }
    },
    n.gestures.Tap = {
        name: "tap",
        index: 100,
        defaults: {
            tap_max_touchtime: 250,
            tap_max_distance: 10,
            tap_always: !0,
            doubletap_distance: 20,
            doubletap_interval: 300
        },
        handler: function(t, e) {
            if (t.eventType == n.EVENT_END && "touchcancel" != t.srcEvent.type) {
                var i = n.detection.previous
                  , r = !1;
                if (t.deltaTime > e.options.tap_max_touchtime || t.distance > e.options.tap_max_distance)
                    return;
                i && "tap" == i.name && t.timeStamp - i.lastEvent.timeStamp < e.options.doubletap_interval && t.distance < e.options.doubletap_distance && (e.trigger("doubletap", t),
                r = !0),
                (!r || e.options.tap_always) && (n.detection.current.name = "tap",
                e.trigger(n.detection.current.name, t))
            }
        }
    },
    n.gestures.Touch = {
        name: "touch",
        index: -1 / 0,
        defaults: {
            prevent_default: !1,
            prevent_mouseevents: !1
        },
        handler: function(t, e) {
            return e.options.prevent_mouseevents && t.pointerType == n.POINTER_MOUSE ? void t.stopDetect() : (e.options.prevent_default && t.preventDefault(),
            void (t.eventType == n.EVENT_START && e.trigger(this.name, t)))
        }
    },
    n.gestures.Transform = {
        name: "transform",
        index: 45,
        defaults: {
            transform_min_scale: .01,
            transform_min_rotation: 1,
            transform_always_block: !1
        },
        triggered: !1,
        handler: function(t, e) {
            if (n.detection.current.name != this.name && this.triggered)
                return e.trigger(this.name + "end", t),
                void (this.triggered = !1);
            if (!(t.touches.length < 2))
                switch (e.options.transform_always_block && t.preventDefault(),
                t.eventType) {
                case n.EVENT_START:
                    this.triggered = !1;
                    break;
                case n.EVENT_MOVE:
                    var i = Math.abs(1 - t.scale)
                      , r = Math.abs(t.rotation);
                    if (i < e.options.transform_min_scale && r < e.options.transform_min_rotation)
                        return;
                    n.detection.current.name = this.name,
                    this.triggered || (e.trigger(this.name + "start", t),
                    this.triggered = !0),
                    e.trigger(this.name, t),
                    r > e.options.transform_min_rotation && e.trigger("rotate", t),
                    i > e.options.transform_min_scale && (e.trigger("pinch", t),
                    e.trigger("pinch" + (t.scale < 1 ? "in" : "out"), t));
                    break;
                case n.EVENT_END:
                    this.triggered && e.trigger(this.name + "end", t),
                    this.triggered = !1
                }
        }
    },
    "function" == typeof define && "object" == typeof define.amd && define.amd ? define((function() {
        return n
    }
    )) : "object" == typeof module && "object" == typeof module.exports ? module.exports = n : t.Hammer = n
}(this);</script>
        <script> function KeyboardInputManager() {
    this.events = {},
    this.listen()
}
KeyboardInputManager.prototype.on = function(e, t) {
    this.events[e] || (this.events[e] = []),
    this.events[e].push(t)
}
,
KeyboardInputManager.prototype.emit = function(e, t) {
    var n = this.events[e];
    n && n.forEach((function(e) {
        e(t)
    }
    ))
}
,
KeyboardInputManager.prototype.listen = function() {
    var e = this
      , t = {
        38: 0,
        39: 1,
        40: 2,
        37: 3,
        75: 0,
        76: 1,
        74: 2,
        72: 3
    };
    document.addEventListener("keydown", (function(n) {
        var r = n.altKey || n.ctrlKey || n.metaKey || n.shiftKey
          , i = t[n.which];
        r || (void 0 !== i && (n.preventDefault(),
        document.getElementById("feedback-container").innerHTML = " ",
        e.emit("move", i)),
        32 === n.which && e.restart.bind(e)(n))
    }
    )),
    document.getElementsByClassName("retry-button")[0].addEventListener("click", this.restart.bind(this)),
    document.getElementById("hint-button").addEventListener("click", (function(t) {
        t.preventDefault(),
        document.getElementById("feedback-container").innerHTML = "<img src=img/spinner.gif />",
        e.emit("think")
    }
    )),
    document.getElementById("run-button").addEventListener("click", (function(t) {
        t.preventDefault(),
        e.emit("run")
    }
    ));
    var n = [Hammer.DIRECTION_UP, Hammer.DIRECTION_RIGHT, Hammer.DIRECTION_DOWN, Hammer.DIRECTION_LEFT]
      , r = document.getElementsByClassName("game-container")[0];
    Hammer(r, {
        drag_block_horizontal: !0,
        drag_block_vertical: !0
    }).on("swipe", (function(t) {
        t.gesture.preventDefault(),
        mapped = n.indexOf(t.gesture.direction),
        -1 !== mapped && e.emit("move", mapped)
    }
    ))
}
,
KeyboardInputManager.prototype.restart = function(e) {
    e.preventDefault(),
    this.emit("restart")
}
;</script>
        <script>function HTMLActuator() {
    this.tileContainer = document.getElementsByClassName("tile-container")[0],
    this.scoreContainer = document.getElementsByClassName("score-container")[0],
    this.messageContainer = document.getElementsByClassName("game-message")[0],
    this.sharingContainer = document.getElementsByClassName("score-sharing")[0],
    this.score = 0
}
HTMLActuator.prototype.actuate = function(t, e) {
    var o = this;
    window.requestAnimationFrame((function() {
        o.clearContainer(o.tileContainer),
        t.cells.forEach((function(t) {
            t.forEach((function(t) {
                t && o.addTile(t)
            }
            ))
        }
        )),
        o.updateScore(e.score),
        e.over && o.message(!1),
        e.won && o.message(!0)
    }
    ))
}
,
HTMLActuator.prototype.restart = function() {
    ga && ga("send", "event", "game", "restart"),
    this.clearMessage()
}
,
HTMLActuator.prototype.clearContainer = function(t) {
    for (; t.firstChild; )
        t.removeChild(t.firstChild)
}
,
HTMLActuator.prototype.addTile = function(t) {
    var e = this
      , o = document.createElement("div")
      , n = t.previousPosition || {
        x: t.x,
        y: t.y
    };
    positionClass = this.positionClass(n);
    var s = ["tile", "tile-" + t.value, positionClass];
    this.applyClasses(o, s),
    o.textContent = t.value,
    t.previousPosition ? window.requestAnimationFrame((function() {
        s[2] = e.positionClass({
            x: t.x,
            y: t.y
        }),
        e.applyClasses(o, s)
    }
    )) : t.mergedFrom ? (s.push("tile-merged"),
    this.applyClasses(o, s),
    t.mergedFrom.forEach((function(t) {
        e.addTile(t)
    }
    ))) : (s.push("tile-new"),
    this.applyClasses(o, s)),
    this.tileContainer.appendChild(o)
}
,
HTMLActuator.prototype.applyClasses = function(t, e) {
    t.setAttribute("class", e.join(" "))
}
,
HTMLActuator.prototype.normalizePosition = function(t) {
    return {
        x: t.x + 1,
        y: t.y + 1
    }
}
,
HTMLActuator.prototype.positionClass = function(t) {
    return "tile-position-" + (t = this.normalizePosition(t)).x + "-" + t.y
}
,
HTMLActuator.prototype.updateScore = function(t) {
    this.clearContainer(this.scoreContainer);
    var e = t - this.score;
    if (this.score = t,
    this.scoreContainer.textContent = this.score,
    e > 0) {
        var o = document.createElement("div");
        o.classList.add("score-addition"),
        o.textContent = "+" + e,
        this.scoreContainer.appendChild(o)
    }
}
,
HTMLActuator.prototype.message = function(t) {
    var e = t ? "game-won" : "game-over"
      , o = t ? "You win!" : "Game over!";
    this.messageContainer.classList.add(e),
    this.messageContainer.getElementsByTagName("p")[0].textContent = o,
    this.clearContainer(this.sharingContainer),
    this.sharingContainer.appendChild(this.scoreTweetButton()),
    twttr.widgets.load()
}
,
HTMLActuator.prototype.clearMessage = function() {
    this.messageContainer.classList.remove("game-won", "game-over")
}
,
HTMLActuator.prototype.scoreTweetButton = function() {
    var t = document.createElement("a");
    t.classList.add("twitter-share-button"),
    t.setAttribute("href", "https://twitter.com/share"),
    t.setAttribute("data-via", "gabrielecirulli"),
    t.textContent = "Tweet";
    var e = "I scored " + this.score + " points at 2048, a game where you join numbers to score high! #2048game #2048ai";
    return t.setAttribute("data-text", e),
    t
}
,
HTMLActuator.prototype.showHint = function(t) {
    document.getElementById("feedback-container").innerHTML = ["↑", "→", "↓", "←"][t]
}
,
HTMLActuator.prototype.setRunButton = function(t) {
    document.getElementById("run-button").innerHTML = t
}
;</script>
        <script>function Grid(e) {
    this.size = e,
    this.startTiles = 2,
    this.cells = [],
    this.build(),
    this.playerTurn = !0
}
Grid.prototype.indexes = [];
for (var x = 0; x < 4; x++) {
    Grid.prototype.indexes.push([]);
    for (var y = 0; y < 4; y++)
        Grid.prototype.indexes[x].push({
            x: x,
            y: y
        })
}
Grid.prototype.build = function() {
    for (var e = 0; e < this.size; e++)
        for (var t = this.cells[e] = [], i = 0; i < this.size; i++)
            t.push(null)
}
,
Grid.prototype.randomAvailableCell = function() {
    var e = this.availableCells();
    if (e.length)
        return e[Math.floor(Math.random() * e.length)]
}
,
Grid.prototype.availableCells = function() {
    var e = [];
    return this.eachCell((function(t, i, r) {
        r || e.push({
            x: t,
            y: i
        })
    }
    )),
    e
}
,
Grid.prototype.eachCell = function(e) {
    for (var t = 0; t < this.size; t++)
        for (var i = 0; i < this.size; i++)
            e(t, i, this.cells[t][i])
}
,
Grid.prototype.cellsAvailable = function() {
    return !!this.availableCells().length
}
,
Grid.prototype.cellAvailable = function(e) {
    return !this.cellOccupied(e)
}
,
Grid.prototype.cellOccupied = function(e) {
    return !!this.cellContent(e)
}
,
Grid.prototype.cellContent = function(e) {
    return this.withinBounds(e) ? this.cells[e.x][e.y] : null
}
,
Grid.prototype.insertTile = function(e) {
    this.cells[e.x][e.y] = e
}
,
Grid.prototype.removeTile = function(e) {
    this.cells[e.x][e.y] = null
}
,
Grid.prototype.withinBounds = function(e) {
    return e.x >= 0 && e.x < this.size && e.y >= 0 && e.y < this.size
}
,
Grid.prototype.clone = function() {
    newGrid = new Grid(this.size),
    newGrid.playerTurn = this.playerTurn;
    for (var e = 0; e < this.size; e++)
        for (var t = 0; t < this.size; t++)
            this.cells[e][t] && newGrid.insertTile(this.cells[e][t].clone());
    return newGrid
}
,
Grid.prototype.addStartTiles = function() {
    for (var e = 0; e < this.startTiles; e++)
        this.addRandomTile()
}
,
Grid.prototype.addRandomTile = function() {
    if (this.cellsAvailable()) {
        var e = Math.random() < .9 ? 2 : 4
          , t = new Tile(this.randomAvailableCell(),e);
        this.insertTile(t)
    }
}
,
Grid.prototype.prepareTiles = function() {
    this.eachCell((function(e, t, i) {
        i && (i.mergedFrom = null,
        i.savePosition())
    }
    ))
}
,
Grid.prototype.moveTile = function(e, t) {
    this.cells[e.x][e.y] = null,
    this.cells[t.x][t.y] = e,
    e.updatePosition(t)
}
,
Grid.prototype.vectors = {
    0: {
        x: 0,
        y: -1
    },
    1: {
        x: 1,
        y: 0
    },
    2: {
        x: 0,
        y: 1
    },
    3: {
        x: -1,
        y: 0
    }
},
Grid.prototype.getVector = function(e) {
    return this.vectors[e]
}
,
Grid.prototype.move = function(e) {
    var t, i, r = this, l = this.getVector(e), o = this.buildTraversals(l), s = !1, n = 0, a = !1;
    return this.prepareTiles(),
    o.x.forEach((function(e) {
        o.y.forEach((function(o) {
            if (t = r.indexes[e][o],
            i = r.cellContent(t)) {
                var h = r.findFarthestPosition(t, l)
                  , c = r.cellContent(h.next);
                if (c && c.value === i.value && !c.mergedFrom) {
                    var u = new Tile(h.next,2 * i.value);
                    u.mergedFrom = [i, c],
                    r.insertTile(u),
                    r.removeTile(i),
                    i.updatePosition(h.next),
                    n += u.value,
                    2048 === u.value && (a = !0)
                } else
                    r.moveTile(i, h.farthest);
                r.positionsEqual(t, i) || (r.playerTurn = !1,
                s = !0)
            }
        }
        ))
    }
    )),
    {
        moved: s,
        score: n,
        won: a
    }
}
,
Grid.prototype.computerMove = function() {
    this.addRandomTile(),
    this.playerTurn = !0
}
,
Grid.prototype.buildTraversals = function(e) {
    for (var t = {
        x: [],
        y: []
    }, i = 0; i < this.size; i++)
        t.x.push(i),
        t.y.push(i);
    return 1 === e.x && (t.x = t.x.reverse()),
    1 === e.y && (t.y = t.y.reverse()),
    t
}
,
Grid.prototype.findFarthestPosition = function(e, t) {
    var i;
    do {
        e = {
            x: (i = e).x + t.x,
            y: i.y + t.y
        }
    } while (this.withinBounds(e) && this.cellAvailable(e));
    return {
        farthest: i,
        next: e
    }
}
,
Grid.prototype.movesAvailable = function() {
    return this.cellsAvailable() || this.tileMatchesAvailable()
}
,
Grid.prototype.tileMatchesAvailable = function() {
    for (var e, t = 0; t < this.size; t++)
        for (var i = 0; i < this.size; i++)
            if (e = this.cellContent({
                x: t,
                y: i
            }))
                for (var r = 0; r < 4; r++) {
                    var l = this.getVector(r)
                      , o = {
                        x: t + l.x,
                        y: i + l.y
                    }
                      , s = this.cellContent(o);
                    if (s && s.value === e.value)
                        return !0
                }
    return !1
}
,
Grid.prototype.positionsEqual = function(e, t) {
    return e.x === t.x && e.y === t.y
}
,
Grid.prototype.toString = function() {
    string = "";
    for (var e = 0; e < 4; e++) {
        for (var t = 0; t < 4; t++)
            this.cells[t][e] ? string += this.cells[t][e].value + " " : string += "_ ";
        string += "\n"
    }
    return string
}
,
Grid.prototype.islands = function() {
    for (var e = this, t = function(i, r, l) {
        if (i >= 0 && i <= 3 && r >= 0 && r <= 3 && e.cells[i][r] && e.cells[i][r].value == l && !e.cells[i][r].marked)
            for (direction in e.cells[i][r].marked = !0,
            [0, 1, 2, 3]) {
                var o = e.getVector(direction);
                t(i + o.x, r + o.y, l)
            }
    }, i = 0, r = 0; r < 4; r++)
        for (var l = 0; l < 4; l++)
            this.cells[r][l] && (this.cells[r][l].marked = !1);
    for (r = 0; r < 4; r++)
        for (l = 0; l < 4; l++)
            this.cells[r][l] && !this.cells[r][l].marked && (i++,
            t(r, l, this.cells[r][l].value));
    return i
}
,
Grid.prototype.smoothness = function() {
    for (var e = 0, t = 0; t < 4; t++)
        for (var i = 0; i < 4; i++)
            if (this.cellOccupied(this.indexes[t][i]))
                for (var r = Math.log(this.cellContent(this.indexes[t][i]).value) / Math.log(2), l = 1; l <= 2; l++) {
                    var o = this.getVector(l)
                      , s = this.findFarthestPosition(this.indexes[t][i], o).next;
                    if (this.cellOccupied(s)) {
                        var n = this.cellContent(s)
                          , a = Math.log(n.value) / Math.log(2);
                        e -= Math.abs(r - a)
                    }
                }
    return e
}
,
Grid.prototype.monotonicity = function() {
    for (var e = this, t = [], i = [], r = 0, l = {
        x: 0,
        y: 0
    }, o = 0; o < 4; o++) {
        t.push([]),
        i.push([]);
        for (var s = 0; s < 4; s++)
            t[o].push(!1),
            i[o].push(!1),
            this.cells[o][s] && this.cells[o][s].value > r && (r = this.cells[o][s].value,
            l.x = o,
            l.y = s)
    }
    increases = 0,
    cellQueue = [l],
    i[l.x][l.y] = !0,
    markList = [l],
    markAfter = 1;
    for (var n = function(r) {
        var l;
        for (direction in markList.push(r),
        l = e.cellOccupied(r) ? Math.log(e.cellContent(r).value) / Math.log(2) : 0,
        [0, 1, 2, 3]) {
            var o = e.getVector(direction)
              , s = {
                x: r.x + o.x,
                y: r.y + o.y
            };
            e.withinBounds(s) && !t[s.x][s.y] && (e.cellOccupied(s) && (targetValue = Math.log(e.cellContent(s).value) / Math.log(2),
            targetValue > l && (increases += targetValue - l)),
            i[s.x][s.y] || (cellQueue.push(s),
            i[s.x][s.y] = !0))
        }
        if (0 == markAfter) {
            for (; markList.length > 0; ) {
                var n = markList.pop();
                t[n.x][n.y] = !0
            }
            markAfter = cellQueue.length
        }
    }; cellQueue.length > 0; )
        markAfter--,
        n(cellQueue.shift());
    return -increases
}
,
Grid.prototype.monotonicity2 = function() {
    for (var e = [0, 0, 0, 0], t = 0; t < 4; t++)
        for (var i = 1 + (l = 0); i < 4; ) {
            for (; i < 4 && !this.cellOccupied(this.indexes[t][i]); )
                i++;
            i >= 4 && i--,
            (o = this.cellOccupied({
                x: t,
                y: l
            }) ? Math.log(this.cellContent(this.indexes[t][l]).value) / Math.log(2) : 0) > (s = this.cellOccupied({
                x: t,
                y: i
            }) ? Math.log(this.cellContent(this.indexes[t][i]).value) / Math.log(2) : 0) ? e[0] += s - o : s > o && (e[1] += o - s),
            l = i,
            i++
        }
    for (var r = 0; r < 4; r++) {
        var l;
        for (i = 1 + (l = 0); i < 4; ) {
            for (; i < 4 && !this.cellOccupied(this.indexes[i][r]); )
                i++;
            var o, s;
            i >= 4 && i--,
            (o = this.cellOccupied({
                x: l,
                y: r
            }) ? Math.log(this.cellContent(this.indexes[l][r]).value) / Math.log(2) : 0) > (s = this.cellOccupied({
                x: i,
                y: r
            }) ? Math.log(this.cellContent(this.indexes[i][r]).value) / Math.log(2) : 0) ? e[2] += s - o : s > o && (e[3] += o - s),
            l = i,
            i++
        }
    }
    return Math.max(e[0], e[1]) + Math.max(e[2], e[3])
}
,
Grid.prototype.maxValue = function() {
    for (var e = 0, t = 0; t < 4; t++)
        for (var i = 0; i < 4; i++)
            if (this.cellOccupied(this.indexes[t][i])) {
                var r = this.cellContent(this.indexes[t][i]).value;
                r > e && (e = r)
            }
    return Math.log(e) / Math.log(2)
}
,
Grid.prototype.isWin = function() {
    for (var e = 0; e < 4; e++)
        for (var t = 0; t < 4; t++)
            if (this.cellOccupied(this.indexes[e][t]) && 2048 == this.cellContent(this.indexes[e][t]).value)
                return !0;
    return !1
}
;</script>
        <script>function Tile(i, t) {
    this.x = i.x,
    this.y = i.y,
    this.value = t || 2,
    this.previousPosition = null,
    this.mergedFrom = null
}
Tile.prototype.savePosition = function() {
    this.previousPosition = {
        x: this.x,
        y: this.y
    }
}
,
Tile.prototype.updatePosition = function(i) {
    this.x = i.x,
    this.y = i.y
}
,
Tile.prototype.clone = function() {
    return newTile = new Tile({
        x: this.x,
        y: this.y
    },this.value),
    newTile
}
;</script>
        <script>function AI(e) {
    this.grid = e
}
AI.prototype.eval = function() {
    var e = this.grid.availableCells().length;
    return .1 * this.grid.smoothness() + 1 * this.grid.monotonicity2() + 2.7 * Math.log(e) + 1 * this.grid.maxValue()
}
,
AI.prototype.search = function(e, i, r, t, o) {
    var s, n, a = -1;
    if (this.grid.playerTurn) {
        for (var l in s = i,
        [0, 1, 2, 3])
            if ((I = this.grid.clone()).move(l).moved) {
                if (t++,
                I.isWin())
                    return {
                        move: l,
                        score: 1e4,
                        positions: t,
                        cutoffs: o
                    };
                var h = new AI(I);
                if (0 == e ? n = {
                    move: l,
                    score: h.eval()
                } : ((n = h.search(e - 1, s, r, t, o)).score > 9900 && n.score--,
                t = n.positions,
                o = n.cutoffs),
                n.score > s && (s = n.score,
                a = l),
                s > r)
                    return {
                        move: a,
                        score: r,
                        positions: t,
                        cutoffs: ++o
                    }
            }
    } else {
        s = r;
        var u = []
          , c = this.grid.availableCells()
          , f = {
            2: [],
            4: []
        };
        for (var p in f)
            for (var v in c) {
                f[p].push(null);
                var g = c[v]
                  , m = new Tile(g,parseInt(p, 10));
                this.grid.insertTile(m),
                f[p][v] = -this.grid.smoothness() + this.grid.islands(),
                this.grid.removeTile(g)
            }
        var d = Math.max(Math.max.apply(null, f[2]), Math.max.apply(null, f[4]));
        for (var p in f)
            for (v = 0; v < f[p].length; v++)
                f[p][v] == d && u.push({
                    position: c[v],
                    value: parseInt(p, 10)
                });
        for (v = 0; v < u.length; v++) {
            var y = u[v].position
              , I = (p = u[v].value,
            this.grid.clone());
            if (m = new Tile(y,p),
            I.insertTile(m),
            I.playerTurn = !0,
            t++,
            t = (n = (h = new AI(I)).search(e, i, s, t, o)).positions,
            o = n.cutoffs,
            n.score < s && (s = n.score),
            s < i)
                return {
                    move: null,
                    score: i,
                    positions: t,
                    cutoffs: ++o
                }
        }
    }
    return {
        move: a,
        score: s,
        positions: t,
        cutoffs: o
    }
}
,
AI.prototype.getBest = function() {
    return this.iterativeDeep()
}
,
AI.prototype.iterativeDeep = function() {
    var e, i = (new Date).getTime(), r = 0;
    do {
        var t = this.search(r, -1e4, 1e4, 0, 0);
        if (-1 == t.move)
            break;
        e = t,
        r++
    } while ((new Date).getTime() - i < minSearchTime);
    return e
}
,
AI.prototype.translate = function(e) {
    return {
        0: "up",
        1: "right",
        2: "down",
        3: "left"
    }[e]
}
;</script>
        <script>function GameManager(t, i, n) {
    this.size = t,
    this.inputManager = new i,
    this.actuator = new n,
    this.running = !1,
    this.inputManager.on("move", this.move.bind(this)),
    this.inputManager.on("restart", this.restart.bind(this)),
    this.inputManager.on("think", function() {
        var t = this.ai.getBest();
        this.actuator.showHint(t.move)
    }
    .bind(this)),
    this.inputManager.on("run", function() {
        this.running ? (this.running = !1,
        this.actuator.setRunButton("Auto-run")) : (this.running = !0,
        this.run(),
        this.actuator.setRunButton("Stop"))
    }
    .bind(this)),
    this.setup()
}
GameManager.prototype.restart = function() {
    this.actuator.restart(),
    this.running = !1,
    this.actuator.setRunButton("Auto-run"),
    this.setup()
}
,
GameManager.prototype.setup = function() {
    this.grid = new Grid(this.size),
    this.grid.addStartTiles(),
    this.ai = new AI(this.grid),
    this.score = 0,
    this.over = !1,
    this.won = !1,
    this.actuate()
}
,
GameManager.prototype.actuate = function() {
    this.actuator.actuate(this.grid, {
        score: this.score,
        over: this.over,
        won: this.won
    })
}
,
GameManager.prototype.move = function(t) {
    var i = this.grid.move(t);
    this.score += i.score,
    i.won ? this.won = !0 : i.moved && this.grid.computerMove(),
    this.grid.movesAvailable() || (this.over = !0),
    this.actuate()
}
,
GameManager.prototype.run = function() {
    var t = this.ai.getBest();
    this.move(t.move);
    var i = animationDelay;
    if (this.running && !this.over && !this.won) {
        var n = this;
        setTimeout((function() {
            n.run()
        }
        ), i)
    }
}
;</script>
        <script>animationDelay = 100,
minSearchTime = 100,
window.requestAnimationFrame((function() {
    new GameManager(4,KeyboardInputManager,HTMLActuator)
}
));</script>
    </body>
</html>
